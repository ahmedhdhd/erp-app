<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ isEditMode ? 'Modifier Transaction' : 'Nouvelle Transaction' }}</h2>
  </div>

  <div class="card">
    <div class="card-body">
      <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="type" class="form-label">Type *</label>
              <select class="form-select" id="type" formControlName="type" [class.is-invalid]="submitted && f['type'].errors">
                <option value="">Sélectionner un type</option>
                <option value="Income">Revenu</option>
                <option value="Expense">Dépense</option>
                <option value="Transfer">Transfert</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f['type'].errors">
                Le type est requis
              </div>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="mb-3">
              <label for="montant" class="form-label">Montant *</label>
              <input type="number" class="form-control" id="montant" formControlName="montant" 
                     [class.is-invalid]="submitted && f['montant'].errors" step="0.01" min="0.01">
              <div class="invalid-feedback" *ngIf="submitted && f['montant'].errors">
                <span *ngIf="f['montant'].errors['required']">Le montant est requis</span>
                <span *ngIf="f['montant'].errors['min']">Le montant doit être supérieur à zéro</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="description" class="form-label">Description *</label>
              <input type="text" class="form-control" id="description" formControlName="description" 
                     [class.is-invalid]="submitted && f['description'].errors">
              <div class="invalid-feedback" *ngIf="submitted && f['description'].errors">
                La description est requise
              </div>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="mb-3">
              <label for="dateTransaction" class="form-label">Date *</label>
              <input type="date" class="form-control" id="dateTransaction" formControlName="dateTransaction" 
                     [class.is-invalid]="submitted && f['dateTransaction'].errors">
              <div class="invalid-feedback" *ngIf="submitted && f['dateTransaction'].errors">
                La date est requise
              </div>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="categoryId" class="form-label">Catégorie</label>
              <select class="form-select" id="categoryId" formControlName="categoryId">
                <option value="">Sélectionner une catégorie</option>
                <option *ngFor="let category of categories" [value]="category.id">
                  {{ category.nom }}
                </option>
              </select>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="mb-3">
              <label for="statut" class="form-label">Statut *</label>
              <select class="form-select" id="statut" formControlName="statut" [class.is-invalid]="submitted && f['statut'].errors">
                <option value="En attente">En attente</option>
                <option value="Complété">Complété</option>
                <option value="Annulé">Annulé</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f['statut'].errors">
                Le statut est requis
              </div>
            </div>
          </div>
        </div>
        
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="methodePaiement" class="form-label">Méthode de Paiement *</label>
              <select class="form-select" id="methodePaiement" formControlName="methodePaiement" 
                      [class.is-invalid]="submitted && f['methodePaiement'].errors">
                <option value="">Sélectionner une méthode</option>
                <option value="Espèces">Espèces</option>
                <option value="Chèque">Chèque</option>
                <option value="Virement">Virement</option>
                <option value="Carte">Carte</option>
              </select>
              <div class="invalid-feedback" *ngIf="submitted && f['methodePaiement'].errors">
                La méthode de paiement est requise
              </div>
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="mb-3">
              <label for="reference" class="form-label">Référence</label>
              <input type="text" class="form-control" id="reference" formControlName="reference">
            </div>
          </div>
        </div>
        
        <div class="mb-3">
          <label for="notes" class="form-label">Notes</label>
          <textarea class="form-control" id="notes" formControlName="notes" rows="3"></textarea>
        </div>
        
        <div class="d-flex justify-content-end">
          <button type="button" class="btn btn-secondary me-2" (click)="onCancel()" [disabled]="loading">
            Annuler
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="loading">
            <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
            {{ isEditMode ? 'Mettre à jour' : 'Créer' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>