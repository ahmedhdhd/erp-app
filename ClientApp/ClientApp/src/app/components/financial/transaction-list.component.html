<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Liste des Transactions</h2>
    <button class="btn btn-primary" (click)="onAddNew()">
      <i class="fas fa-plus"></i> Nouvelle Transaction
    </button>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Date</th>
              <th>Description</th>
              <th>Type</th>
              <th>Montant</th>
              <th>Catégorie</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions">
              <td>{{ transaction.dateTransaction | date:'dd/MM/yyyy' }}</td>
              <td>{{ transaction.description }}</td>
              <td>
                <span class="badge" [ngClass]="{
                  'bg-success': transaction.type === 'Income',
                  'bg-danger': transaction.type === 'Expense',
                  'bg-info': transaction.type === 'Transfer'
                }">
                  {{ transaction.type }}
                </span>
              </td>
              <td [ngClass]="{
                'text-success': transaction.type === 'Income',
                'text-danger': transaction.type === 'Expense'
              }">
                {{ transaction.montant | currency:'EUR' }}
              </td>
              <td>{{ transaction.categoryNom }}</td>
              <td>
                <span class="badge" [ngClass]="{
                  'bg-warning': transaction.statut === 'En attente',
                  'bg-success': transaction.statut === 'Complété',
                  'bg-secondary': transaction.statut === 'Annulé'
                }">
                  {{ transaction.statut }}
                </span>
              </td>
              <td>
                <button class="btn btn-sm btn-outline-primary me-1" (click)="onView(transaction)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-sm btn-outline-warning me-1" (click)="onEdit(transaction)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-sm btn-outline-danger" (click)="onDelete(transaction)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <nav *ngIf="totalPages > 1">
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="onPageChange(currentPage - 1)">Précédent</a>
          </li>
          <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index" 
              [class.active]="i + 1 === currentPage">
            <a class="page-link" (click)="onPageChange(i + 1)">{{ i + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" (click)="onPageChange(currentPage + 1)">Suivant</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>